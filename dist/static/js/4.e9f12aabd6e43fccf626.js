webpackJsonp([4],{Hbkh:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("woOf"),i=a.n(o),n=a("l/JR"),s=a("yt7g"),r=a("EWeX"),l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-col",{staticClass:"wrapper",attrs:{span:10}},[a("span",[e._v("Filename:")]),e._v(" "),a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"please enter the filename","prefix-icon":"el-icon-document"},model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}})],1),e._v(" "),a("el-col",{staticClass:"wrapper",attrs:{span:10}},[a("span",[e._v("Cell Auto Width:")]),e._v(" "),a("el-radio-group",{attrs:{syle:"width: 66%;",size:"medium"},model:{value:e.autoWidth,callback:function(t){e.autoWidth=t},expression:"autoWidth"}},[a("el-radio",{attrs:{label:!0,border:""}},[e._v("True")]),e._v(" "),a("el-radio",{attrs:{label:!1,border:""}},[e._v("False")])],1)],1),e._v(" "),a("el-col",{staticClass:"wrapper",attrs:{span:10}},[a("span",[e._v("BookType:")]),e._v(" "),a("el-select",{staticStyle:{width:"70%"},model:{value:e.bookType,callback:function(t){e.bookType=t},expression:"bookType"}},e._l(e.bookTypeOptions,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1)],1)},staticRenderFns:[]};var d={name:[{required:!0,message:"请输入姓名",trigger:"blur"}]},c={name:"",sex:-1,age:0,birth:"",addr:""},m={name:"",sex:-1,age:0,birth:"",addr:""},u={data:function(){return{user:{},users:[],total:0,page:1,sels:[],listLoading:!1,filters:{name:""},addFormVisible:!1,addForm:c,addLoading:!1,editFormVisible:!1,editForm:m,editFormRules:d,editLoading:!1,showExportExcelBar:!1,bookType:"xlsx",autoWidth:!0,filename:"",downloadLoading:!1,exportBtnTxt:"导出excel"}},mounted:function(){this.getUsers(),this.user=Object(r.a)({name:"user"})},methods:{formatSex:function(e){return 1===e.sex?"男":0===e.sex?"女":"未知"},getUsers:function(e){var t=this,a=e||"",o={page:this.page,name:a};this.listLoading=!0,Object(n.j)(o).then(function(e){e.success&&(t.listLoading=!1,t.total=e.total,t.users=e.users)}).catch(function(e){t.listLoading=!1})},handleSelsChange:function(e){this.sels=e},handleAdd:function(){this.addFormVisible=!0,this.addForm=c},handleCurrentChange:function(e){this.page=e,this.getUsers()},handleEdit:function(e,t){this.editFormVisible=!0,this.editForm=t},handleDel:function(e,t){var a=this;this.$confirm("确认删除该项记录吗？","提示",{type:"warning"}).then(function(){if(-1!==a.user.roles.indexOf("admin")){a.listLoading=!0;var e={accessToken:a.user.accessToken,id:t.id};Object(n.k)(e).then(function(e){a.listLoading=!1,e.success?(a.$message({message:e.msg,type:"success"}),a.getUsers()):a.$message({type:"error",message:e.msg})})}else a.$message({type:"danger",message:"权限不足"})}).catch(function(e){a.listLoading=!1,a.$message({message:e,type:"error"})})},batchRemove:function(){var e=this,t=this.sels.map(function(e){return e.id});this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then(function(){e.listLoading=!0;var a={accessToken:e.user.accessToken,ids:t};Object(n.b)(a).then(function(t){e.listLoading=!1,t.success?(e.$message({message:t.msg,type:"success"}),e.getUsers()):e.$message({type:"error",message:t.msg})})}).catch(function(t){e.listLoading=!1,e.$message({message:t,type:"danger"})})},addSubmit:function(){var e=this;this.$refs.addForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{type:"warning"}).then(function(){e.addLoading=!0;var t=i()({},e.addForm);t.birth=Object(s.a)(t.birth),Object(n.a)(t).then(function(t){e.addLoading=!1,t.success?(e.$message({type:"success",message:t.msg}),e.$refs.addForm.resetFields(),e.addFormVisible=!1,e.getUsers()):e.$message({type:"error",message:t.msg})})}).catch(function(t){e.addLoading=!1,e.$message({type:"danger",message:t})})})},editSubmit:function(){var e=this;this.$refs.editForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{type:"warning"}).then(function(){e.editLoading=!0;var t=i()({},e.editForm);t.birth=Object(s.a)(t.birth),Object(n.e)(t).then(function(t){e.editLoading=!1,t.success?(e.$message({type:"success",message:"提交成功"}),e.$refs.editForm.resetFields(),e.editFormVisible=!1,e.getUsers()):e.$message({type:"error",message:t.msg})})}).catch(function(t){e.editLoading=!1,e.$message({type:"danger",message:t})})})},handleDownload:function(){var e=this;this.downloadLoading=!0,a.e(18).then(a.bind(null,"zWO4")).then(function(t){var a=e.users,o=e.formatJson(a,["name","sex","age","birth","addr"]);t.export_json_to_excel({header:["姓名","性别","年龄","生日","地址"],data:o,filename:e.filename,autoWidth:e.autoWidth,bookType:e.bookType}),e.downloadLoading=!1})},formatJson:function(e,t){return e.map(function(e){return t.map(function(t){return e[t]})})},bookTypeChange:function(e){this.bookType=e},autoWidthChange:function(e){this.autoWidth=e},filenameChange:function(e){this.filename=e}},components:{ExportExcelBar:a("VU/8")({data:function(){return{filename:"excel-list",autoWidth:!0,bookType:"xlsx",bookTypeOptions:["xlsx","csv","txt"]}},watch:{bookType:function(e){e&&this.$emit("bookTypeChange",e)},filename:function(e){e&&this.$emit("filenameChange",e)},autoWidth:function(e){this.$emit("autoWidthChange",e)}}},l,!1,function(e){a("N3uH")},"data-v-0572ef57",null).exports}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"姓名"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getUsers(e.filters.name)}}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")])],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showExportExcelBar=!e.showExportExcelBar}}},[e._v(e._s(this.showExportExcelBar?"取消导出":"导出excel"))])],1)],1),e._v(" "),e.showExportExcelBar?a("el-col",{staticStyle:{margin:"10px 0"},attrs:{span:24}},[a("ExportExcelBar",{on:{filenameChange:e.filenameChange,autoWidthChange:e.autoWidthChange,bookTypeChange:e.bookTypeChange}}),e._v(" "),a("el-button",{on:{click:e.handleDownload}},[e._v("下载")])],1):e._e(),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.users},on:{"selection-change":e.handleSelsChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",width:"60",index:15*(e.page-1)+1}}),e._v(" "),a("el-table-column",{attrs:{label:"姓名",prop:"name",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"性别",prop:"sex",formatter:e.formatSex,width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"年龄",prop:"age",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"生日",prop:"birth",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"地址",prop:"addr",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.handleDel(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-button",{attrs:{type:"danger",disabled:0===e.sels.length},on:{click:e.batchRemove}},[e._v("批量删除")]),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev,pager,next",background:"",total:e.total,"page-size":15,"current-page":e.page},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{visible:e.editFormVisible,title:"编辑","close-on-click-modal":!1},on:{"update:visible":function(t){e.editFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.editFormRules}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-radio-group",{model:{value:e.editForm.sex,callback:function(t){e.$set(e.editForm,"sex",t)},expression:"editForm.sex"}},[a("el-radio",{attrs:{label:1}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("女")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"年龄",prop:"age"}},[a("el-input-number",{model:{value:e.editForm.age,callback:function(t){e.$set(e.editForm,"age",t)},expression:"editForm.age"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"生日",prop:"birth"}},[a("el-date-picker",{attrs:{placeholder:"选择生日"},model:{value:e.editForm.birth,callback:function(t){e.$set(e.editForm,"birth",t)},expression:"editForm.birth"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址",prop:"addr"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入地址"},model:{value:e.editForm.addr,callback:function(t){e.$set(e.editForm,"addr",t)},expression:"editForm.addr"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.editLoading},on:{click:e.editSubmit}},[e._v("提交")]),e._v(" "),a("el-button",{on:{click:function(t){e.editFormVisible=!1}}},[e._v("取消")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.addFormVisible,title:"新增","close-on-click-modal":!1},on:{"update:visible":function(t){e.addFormVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.editFormRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-radio-group",{model:{value:e.addForm.sex,callback:function(t){e.$set(e.addForm,"sex",t)},expression:"addForm.sex"}},[a("el-radio",{attrs:{label:1}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("女")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"年龄",prop:"age"}},[a("el-input-number",{attrs:{min:0,max:150},model:{value:e.addForm.age,callback:function(t){e.$set(e.addForm,"age",t)},expression:"addForm.age"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"生日",prop:"birth"}},[a("el-date-picker",{attrs:{placeholder:"选择生日"},model:{value:e.addForm.birth,callback:function(t){e.$set(e.addForm,"birth",t)},expression:"addForm.birth"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址",prop:"addr"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入地址"},model:{value:e.addForm.addr,callback:function(t){e.$set(e.addForm,"addr",t)},expression:"addForm.addr"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.addLoading},on:{click:e.addSubmit}},[e._v("创建")]),e._v(" "),a("el-button",{nativeOn:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(e){a("O9fe")},"data-v-0f96178e",null);t.default=f.exports},N3uH:function(e,t){},O9fe:function(e,t){},yt7g:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var o=function(e){var t=new Date(e),a=t.getFullYear()+"-"+t.getMonth()+"-"+t.getDay();return console.log(a),a}}});
//# sourceMappingURL=4.e9f12aabd6e43fccf626.js.map