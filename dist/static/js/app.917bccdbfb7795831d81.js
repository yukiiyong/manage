webpackJsonp([11],{EWeX:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",function(){return setStore}),__webpack_require__.d(__webpack_exports__,"a",function(){return getStore});var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__=__webpack_require__("mvHQ"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof__=__webpack_require__("pFYg"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof__),setStore=function(e){var n=e.name,t=e.type,r=e.content,a={dataType:void 0===r?"undefined":__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof___default()(r),content:r,type:t,datetime:(new Date).getTime()};t&&window.localStorage.setItem(n,__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(a)),window.sessionStorage.setItem(n,__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(a))},getStore=function getStore(params){var name=params.name,type=params.type,obj={},content=void 0;return obj=type?window.sessionStorage.getItem(name):window.localStorage.getItem(name),obj?(obj=JSON.parse(obj),"boolean"===obj.dataType?content=eval(obj.content):"number"===obj.dataType?content=Number(obj.content):"string"!==obj.dataType&&"object"!==obj.dataType||(content=obj.content),content):""},removeStore=function(e){var n=e.name;window.localStorage.removeItem(n),window.sessionStorage.removeItem(n)}},NHnr:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("Dd8w"),a=t.n(r),o=t("7+uW"),s={name:"App",mounted:function(){var e=localStorage.getItem("themeValue");e&&window.document.documentElement.setAttribute("data-theme",e)}},u={render:function(){var e=this.$createElement,n=this._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]};var i=t("VU/8")(s,u,!1,function(e){t("PJhj")},null,null).exports,c=t("NYxO"),_={addRoutes:function(e){return e.permission.addRoutes},permission_routers:function(e){return e.permission.routers},roles:function(e){return e.user.roles}},m=t("//Fk"),d=t.n(m),l=t("/ocq"),f={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"hello"},[t("h1",[e._v(e._s(e.msg))]),e._v(" "),t("h2",[e._v("Essential Links")]),e._v(" "),e._m(0),e._v(" "),t("h2",[e._v("Ecosystem")]),e._v(" "),e._m(1)])},staticRenderFns:[function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ul",[t("li",[t("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[e._v("\n        Core Docs\n      ")])]),e._v(" "),t("li",[t("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[e._v("\n        Forum\n      ")])]),e._v(" "),t("li",[t("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[e._v("\n        Community Chat\n      ")])]),e._v(" "),t("li",[t("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[e._v("\n        Twitter\n      ")])]),e._v(" "),t("br"),e._v(" "),t("li",[t("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[e._v("\n        Docs for This Template\n      ")])])])},function(){var e=this.$createElement,n=this._self._c||e;return n("ul",[n("li",[n("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),n("li",[n("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),n("li",[n("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),n("li",[n("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};t("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},f,!1,function(e){t("OVGu")},"data-v-d8ec41bc",null).exports;o.default.use(l.a);var p=function(e){t.e(6).then(t.bind(null,"TyLo")).then(function(n){e(n)})},h=[{path:"/",name:"数据管理",iconCls:"el-icon-message",component:p,redirect:{path:"/user"},children:[{path:"/user",name:"用户列表",component:function(e){t.e(3).then(t.bind(null,"Hbkh")).then(function(n){e(n)})}},{path:"/admin",name:"管理员列表",component:function(e){t.e(7).then(t.bind(null,"AcrN")).then(function(n){e(n)})}}]},{path:"/",name:"chart",iconCls:"fa fa-bar-chart",component:p,children:[{path:"/chart",name:"图表",component:function(e){t.e(0).then(t.bind(null,"StQU")).then(function(n){e(n)})}}]},{path:"/",name:"设置",iconCls:"fa fa-gear",component:p,children:[{path:"/setting",name:"设置",component:function(){return t.e(8).then(t.bind(null,"P7aR"))}},{path:"/mdInput",name:"input",component:function(){return t.e(2).then(t.bind(null,"8W7Z"))}}]},{path:"/login",component:function(e){t.e(9).then(t.bind(null,"EV1k")).then(function(n){e(n)})},hidden:!0}],v=new l.a({routes:h}),b=[{path:"/",name:"数据修改",iconCls:"fa fa-id-card-o",component:p,meta:{roles:["admin"]},children:[{path:"/form",name:"新增用户",component:function(e){t.e(5).then(t.bind(null,"NTtZ")).then(function(n){e(n)})},meta:{roles:["admin"]}},{path:"/upload",name:"上传表格",component:function(){return t.e(1).then(t.bind(null,"ePtl"))},meta:{roles:["admin"]}}]},{path:"*",redirect:"/404",hidden:!0},{path:"/404",component:function(){return t.e(4).then(t.bind(null,"djY+"))},hidden:!0}];var g={state:{addRoutes:[],routers:h},mutations:{SET_ROUTERS:function(e,n){e.addRoutes=n,e.routers=h.concat(n)}},actions:{GenerateRoutes:function(e,n){var t=e.commit;return new d.a(function(e,r){var a=n.roles,o=void 0;o=a.indexOf("admin")>0?b:function e(n,t){return n.filter(function(n){return!!function(e,n){return!e.meta||!e.meta.roles||n.some(function(n){return e.meta.roles.indexOf(n)>=0})}(n,t)&&(n.children&&n.children.length&&(n.children=e(n.children,t)),!0)})}(b,a),t("SET_ROUTERS",o),e()})}}},E=t("l/JR"),T=t("EWeX"),w={state:{token:"",roles:[],name:"",avatar:""},mutations:{SET_TOKEN:function(e,n){e.token=n},SET_NAME:function(e,n){e.name=n},SET_AVATAR:function(e,n){e.avatar=n},SET_ROLES:function(e,n){e.roles=n}},actions:{loginAction:function(e,n){var t=e.commit;return new d.a(function(e,r){Object(E.g)(n).then(function(n){n&&n.success&&(t("SET_TOKEN",n.data.accessToken),e(n))}).catch(function(e){r("login"+e)})})},getInfo:function(e){var n=e.commit;e.state;return new d.a(function(e,t){var r=Object(T.a)({name:"user"});r.roles&&r.roles.length>0?n("SET_ROLES",r.roles):t("getInfo: roles must be a non-null array"),n("SET_NAME",r.username),n("SET_AVATAR",r.userAvatar),e(r)}).catch(function(e){reject(e)})},FDLogout:function(e){var n=e.commit;return new d.a(function(e,t){Object(T.b)({name:"user",content:""}),n("SET_TOKEN",""),n("SET_ROLES",[]),n("SET_NAME",""),n("SET_AVATAR",""),e()}).catch(function(e){reject(e)})}}};o.default.use(c.a);for(var R=new c.a.Store({modules:{permission:g,user:w},getters:_}),O=t("zL8q"),j=t.n(O),S=(t("tvR6"),t("e0XP"),t("woOf")),k=t.n(S),y=t("mtWM"),P=t.n(y),A=t("KorX"),M=t.n(A),D=t("zNUS"),I=t.n(D),U=[{username:"admin",password:"123456"},{username:"123456",password:"123456"}],L={accessToken:I.a.Random.id(),username:I.a.Random.cname(),userAvatar:I.a.Random.image("300x250",I.a.Random.color()),sex:I.a.Random.integer(0,1),roles:["user"]},x=[],N=0;N<90;N++)x.push(I.a.mock({id:I.a.Random.id(),name:I.a.Random.cname(),sex:I.a.Random.integer(0,1),"age|18-60":1,birth:I.a.Random.date(),addr:I.a.Random.province()+I.a.Random.city()+I.a.Random.county()}));for(var C=[],W=0;W<40;W++)C.push(I.a.mock({name:I.a.Random.cname(),registime:I.a.Random.date(),addr:I.a.Random.province()+I.a.Random.city(),"roles|1":["管理员","超级管理员"]}));var K=x,J=C;({bootstrap:function(){var e=new M.a(P.a);e.onGet("/success").reply(200,{success:!0}),e.onGet("/error").reply(500,{success:!1}),e.onPost("/api/login").reply(function(e){var n=JSON.parse(e.data),t=n.username,r=n.password;return new d.a(function(e,n){setTimeout(function(){var n=k()({},L),a=U.some(function(e){if(e.username===t&&e.password===r)return n.username=t,"admin"===t&&(n.roles=["admin"]),!0});e(a?[200,{code:200,success:!0,msg:"登录成功",data:n}]:[200,{code:500,success:!1,msg:"登录失败！"}])},1e3)})}),e.onGet("/user/list").reply(function(e){var n=e.name,t=e.page,r=K.filter(function(e){return!n||-1!==e.name.indexOf(n)}),a=r.slice(15*(t-1),15*t);return new d.a(function(e,n){setTimeout(function(){e([200,{code:200,success:!0,total:r.length,users:a}])},1e3)})}),e.onGet("/user/admin").reply(function(e){var n=e.name,t=e.page,r=J.filter(function(e){return!n||-1!==e.name.indexOf(n)}),a=r.slice(15*(t-1),15*t);return new d.a(function(e,n){setTimeout(function(){e([200,{success:!0,total:r.length,users:a}])},500)})}),e.onPost("/user/remove").reply(function(e){var n=JSON.parse(e.data),t=n.accessToken,r=n.id;return t?(K=K.filter(function(e){return e.id!==r}),new d.a(function(e,n){setTimeout(function(){e([200,{success:!0,msg:"用户删除成功"}])},500)})):new d.a(function(e,n){setTimeout(function(){e([200,{success:!1,msg:"token丢失"}])},500)})}),e.onPost("/user/batchremove").reply(function(e){var n=JSON.parse(e.data),t=n.accessToken,r=n.ids;return r=r.split(","),t?(K=K.filter(function(e){return!r.include(e.id)}),new d.a(function(e,n){setTimeout(function(){e([200,{success:!0,msg:"批量删除用户成功！"}])},500)})):new d.a(function(e,n){setTimeout(function(){e([200,{success:!1,msg:"token丢失"}])},500)})}),e.onPost("/user/edit").reply(function(e){var n=JSON.parse(e.data),t=n.id,r=n.name,a=n.age,o=n.sex,s=n.birth,u=n.addr;return K.some(function(e){if(e.id===t)return e.name=r,e.age=a,e.sex=o,e.birth=s,e.addr=u,!0}),new d.a(function(e,n){setTimeout(function(){e([200,{success:!0,msg:"用户资料更新成功"}])},500)})}),e.onPost("/user/add").reply(function(e){var n=JSON.parse(e.data),t=n.name,r=n.age,a=n.sex,o=n.birth,s=n.addr;return K.some(function(e){return e.name===t})?new d.a(function(e,n){setTimeout(function(){e([200,{success:!1,msg:"已存在用户"}])},500)}):(K.push({name:t,age:r,sex:a,birth:o,addr:s}),new d.a(function(e,n){setTimeout(function(){e([200,{success:!0,msg:"用户添加成功！"}])},500)}))})}}).bootstrap(),o.default.use(j.a),o.default.config.productionTip=!1,v.beforeEach(function(e,n,t){if("/login"===e.path)return sessionStorage.removeItem("user"),void t();var r=Object(T.a)({name:"user",type:!0});r.roles;r.accessToken?(console.log(R.getters.roles),0===R.getters.roles.length?R.dispatch("getInfo").then(function(n){var r=n.roles;R.dispatch("GenerateRoutes",{roles:r}).then(function(){var n=R.getters.addRoutes;v.options.routes=R.getters.permission_routers,v.addRoutes(n),t(a()({},e,{replace:!0}))})}).catch(function(e){alert(e)}):t()):t({path:"/login"})}),new o.default({el:"#app",router:v,store:R,render:function(e){return e(i)}})},OVGu:function(e,n){},PJhj:function(e,n){},T452:function(e,n,t){"use strict";t.d(n,"a",function(){return r});var r={base1:"http://rap2api.taobao.org/app/mock/119360/",base:"/",login:"api/login",userList:"user/list",adminList:"user/admin",removeUser:"user/remove",batchRemove:"user/batchremove",editUser:"user/edit",addUser:"user/add"}},e0XP:function(e,n){},"l/JR":function(e,n,t){"use strict";t.d(n,"g",function(){return s}),t.d(n,"e",function(){return u}),t.d(n,"d",function(){return i}),t.d(n,"f",function(){return c}),t.d(n,"b",function(){return _}),t.d(n,"c",function(){return m}),t.d(n,"a",function(){return d});var r=t("mtWM"),a=t.n(r),o=t("T452"),s=function(e){return a.a.post(o.a.base+o.a.login,e).then(function(e){return e.data})},u=function(e){return a.a.get(o.a.base+o.a.userList,e).then(function(e){return e.data})},i=function(e){return a.a.get(o.a.base+o.a.adminList,e).then(function(e){return e.data})},c=function(e){return a.a.post(o.a.base+o.a.removeUser,e).then(function(e){return e.data})},_=function(e){return a.a.post(o.a.base+o.a.batchRemove,e).then(function(e){return e.data})},m=function(e){return a.a.post(o.a.base+o.a.editUser,e).then(function(e){return e.data})},d=function(e){return a.a.post(o.a.base+o.a.addUser,e).then(function(e){return e.data})}},tvR6:function(e,n){}},["NHnr"]);
//# sourceMappingURL=app.917bccdbfb7795831d81.js.map