{"version":3,"sources":["webpack:///src/components/sec/secList.vue","webpack:///./src/components/sec/secList.vue?3af6","webpack:///./src/components/sec/secList.vue"],"names":["statusMap","0","1","2","3","typeMap","goodsTypeMap","secList","data","list","id","title","activeStatus","startDate","endDate","status","filters","secPromotion","isEdit","total","page","listLoading","dialogVisible","filterActiveStatus","row","nowTime","Date","getTime","createTime","time","mounted","this","getList","methods","_this","param","extends_default","Object","request","then","res","success","catch","e","$message","type","message","resetSearch","$refs","form","resetFields","handleCurrentChange","val","handleDelete","index","_this2","$confirm","splice","handleAdd","assign_default","handleUpdate","handleReset","handleSubmit","_this3","confirmButtonText","cancelButtonText","formatDate","console","log","$options","date","dateVal","setMinutes","getMinutes","getTimezoneOffset","toJSON","substr","replace","handleStatusChange","_this4","msg","sec_secList","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","shadow","_v","size","on","click","ref","model","label-width","label","prop","placeholder","value","callback","$$v","$set","expression","staticStyle","float","directives","name","rawName","margin","border","align","width","scopedSlots","_u","key","fn","scope","_s","_f","active-value","inactive-value","change","$event","$index","span","layout","background","page-size","current-page","current-change","visible","update:visible","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/14.68a80ca4f0276647dbe3.js","sourcesContent":["<template>\r\n  <section>\r\n\t\t<el-card class=\"mt20\" shadow=\"never\">\r\n\t\t\t<div class=\"search-tit \">\r\n\t\t\t\t<i class=\"el-icon-search\"></i>\r\n\t\t\t\t<span >筛选搜索</span>\r\n\t\t\t\t<el-button @click=\"resetSearch\" class=\"search-btn\" size=\"mini\">重置</el-button>\r\n\t\t\t\t<el-button @click=\"getList\" type=\"primary\" class=\"search-btn\" size=\"mini\">查找</el-button>\r\n\t\t\t</div>\r\n\t\t\t<el-form :model=\"filters\" ref=\"form\" label-width=\"150px\">\r\n\t\t\t\t<el-form-item label=\"活动标题:\" prop=\"title\">\r\n\t\t\t\t\t<el-input v-model=\"filters.title\" placeholder=\"请输入活动名称\" ></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t</el-card>\r\n\t\t<el-card shadow=\"never\" class=\"mt20\">\r\n\t\t\t<div class=\"tit\">\r\n\t\t\t\t<i class=\"fa fa-file-text-o\" ></i>\r\n\t\t\t\t<span>数据列表</span>\r\n\t\t\t\t<el-button size=\"mini\" @click=\"handleAdd\" style=\"float: right;\">添加</el-button>\r\n\t\t\t</div>\r\n\t\t</el-card>\r\n\t\t<el-table :data=\"list\" v-loading=\"listLoading\" style=\"margin: 20px 10px;\" border>\r\n\t\t\t<el-table-column prop=\"id\" label=\"编号\" align=\"center\" width=\"100\"></el-table-column>\r\n\t\t\t<el-table-column prop=\"title\" label=\"活动标题\" align=\"center\"></el-table-column>\r\n\t\t\t<el-table-column prop=\"activeStatus\" label=\"活动状态\" align=\"center\">\r\n\t\t\t\t<template slot-scope=\"scope\" >\r\n\t\t\t\t\t<span >{{scope.row | filterActiveStatus}}</span>\r\n\t\t\t\t</template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"startDate\" label=\"开始时间\" align=\"center\"></el-table-column>\r\n\t\t\t<el-table-column prop=\"endDate\" label=\"结束时间\" align=\"center\"></el-table-column>\r\n\t\t\t<el-table-column label=\"上线/下线\" align=\"center\">\r\n\t\t\t\t<template slot-scope=\"scope\" >\r\n\t\t\t\t\t<el-switch @change=\"handleStatusChange(scope.row,scope.$index)\" :active-value=\"1\" :inactive-value=\"0\" v-model=\"scope.row.status\"></el-switch>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"操作\" width=\"250\" align=\"center\">\r\n\t\t\t\t<template slot-scope=\"scope\" >\r\n\t\t\t\t\t<el-button size=\"mini\" @click=\"handleUpdate(scope.row)\">编辑</el-button>\r\n\t\t\t\t\t<el-button size=\"mini\" type=\"danger\" @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t</el-table>\r\n\t\t<el-col :span=\"24\" class=\"toolbar\" >\r\n\t\t\t<el-pagination layout=\"total, prev, pager, next, jumper\" background :page-size=\"15\" :total=\"total\" :current-page=\"page\" @current-change=\"handleCurrentChange\" ></el-pagination>\r\n\t\t</el-col>\r\n\t\t<el-dialog :visible.sync=\"dialogVisible\" :title=\"isEdit? '编辑活动':'添加活动'\">\r\n\t\t\t<div>\r\n\t\t\t\t<el-form :model=\"secPromotion\" label-width=\"100px\" ref=\"secPromotionForm\" >\r\n\t\t\t\t\t<el-form-item label=\"活动标题\" prop=\"title\">\r\n\t\t\t\t\t\t<el-input v-model=\"secPromotion.title\" placeholder=\"请输入活动标题\" ></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"开始时间\" prop=\"startDate\">\r\n\t\t\t\t\t\t<el-date-picker v-model=\"secPromotion.startDate\" type=\"date\" placeholder=\"请选择时间\" ></el-date-picker>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"结束时间\" prop=\"endDate\">\r\n\t\t\t\t\t\t<el-date-picker v-model=\"secPromotion.endDate\" type=\"date\" placeholder=\"请选择时间\" ></el-date-picker>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"上线/下线\" prop=\"status\">\r\n\t\t\t\t\t\t<el-radio-group v-model=\"secPromotion.status\" >\r\n\t\t\t\t\t\t\t<el-radio :label=\"1\" >上线</el-radio>\r\n\t\t\t\t\t\t\t<el-radio :label=\"0\" >下线</el-radio>\r\n\t\t\t\t\t\t</el-radio-group>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-form>\r\n\t\t\t\t<div class=\"op-container mt40\" >\r\n\t\t\t\t\t<el-button @click=\"handleReset\" >重置</el-button>\r\n\t\t\t\t\t<el-button type=\"primary\" @click=\"handleSubmit\" >提交</el-button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</el-dialog>\r\n\t</section>\r\n</template>\r\n<script >\r\n\timport {getSecList, updateSecStatus, updateSec, createSec} from 'api/request'\r\n\r\n\tconst statusMap = {\r\n\t\t0: '未使用',\r\n\t\t1: '已过期',\r\n\t\t2: '已下架',\r\n\t\t3: '已使用'\r\n\t}\r\n\tconst typeMap = {\r\n\t\t0: '全场赠券',\r\n    1: '会员赠券',\r\n    2: '注册赠券'\r\n\t}\r\n\tconst goodsTypeMap = {\r\n\t\t0: '全场通用',\r\n\t\t1: '指定商品',\r\n\t\t2: '指定分类'\r\n\t}\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tlist:[{\r\n          id: '',\r\n          title: '',\r\n          activeStatus: 0,\r\n          startDate: '',\r\n          endDate: '',\r\n          status: 0\r\n        }],\r\n\t\t\t\tfilters: {\r\n\t\t\t\t\ttitle: ''\r\n\t\t\t\t}, \r\n\t\t\t\tsecPromotion: {},\r\n\t\t\t\tisEdit: false,\r\n\t\t\t\ttotal: 0,\r\n\t\t\t\tpage: 1,\r\n\t\t\t\tlistLoading: false,\r\n\t\t\t\tdialogVisible: false,\r\n\t\t\t\tstatusMap,\r\n\t\t\t\ttypeMap,\r\n\t\t\t\tgoodsTypeMap\r\n\t\t\t}\r\n\t\t},\r\n\t\tfilters: {\r\n\t\t\tfilterActiveStatus(row) {\r\n        let nowTime = new Date().getTime()\r\n        if(nowTime >= row.startDate && nowTime <= row.endDate) {\r\n          return '活动进行中'\r\n        } else if(nowTime < row.startDate) {\r\n          return '活动未开始'\r\n        } else {\r\n          return '活动已结束'\r\n        }\r\n\t\t\t},\r\n\t\t\tcreateTime(time) {\r\n\t\t\t\tlet date = new Date(time)\r\n\t\t\t\treturn date\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.getList()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetList() {\r\n\t\t\t\tthis.listLoading = true\r\n\t\t\t\tlet param = {\r\n\t\t\t\t\t...this.filters,\r\n\t\t\t\t\tpage: this.page\r\n\t\t\t\t}\r\n\t\t\t\tgetSecList(param).then(res => {\r\n\t\t\t\t\tif(res.success) {\r\n\t\t\t\t\t\tthis.listLoading = false\r\n\t\t\t\t\t\tthis.list = res.list\r\n\t\t\t\t\t\tthis.total = res.total\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(e => {\r\n\t\t\t\t\tthis.listLoading = false\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'danger',\r\n\t\t\t\t\t\tmessage: e\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tresetSearch() {\r\n\t\t\t\tthis.$refs.form.resetFields()\r\n\t\t\t},\r\n\t\t\thandleCurrentChange(val) {\r\n\t\t\t\tthis.page = val\r\n\t\t\t\tthis.getList()\r\n\t\t\t},\r\n\t\t\thandleDelete(index, row) {\r\n\t\t\t\tthis.$confirm('确定要删除吗？', '提示', {\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tthis.list.splice(index, 1)\r\n\t\t\t\t})\r\n\t\t\t\tthis.getList()\r\n      },\r\n      handleAdd(index, row) {\r\n\t\t\t\t//添加秒杀活动\r\n\t\t\t\tthis.dialogVisible = true\r\n\t\t\t\tthis.isEdit = false\r\n\t\t\t\tthis.secPromotion = Object.assign({}, row)\r\n      },\r\n      handleUpdate(row) {\r\n\t\t\t\t//编辑秒杀活动，UI复用\r\n\t\t\t\tthis.dialogVisible = true\r\n\t\t\t\tthis.isEdit = true //标识是编辑还是添加，dialog提交时使用\r\n\t\t\t\tthis.secPromotion = Object.assign({}, row)\r\n      },\r\n\t\t\thandleReset() {\r\n\t\t\t\tthis.$refs.secPromotion.resetFields()\r\n\t\t\t},\r\n\t\t\thandleSubmit() {\r\n\t\t\t\tthis.$confirm('确定提交？','提示',{\r\n\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tthis.secPromotion.startDate = this.formatDate(this.secPromotion.startDate)\r\n\t\t\t\t\tthis.secPromotion.endDate = this.formatDate(this.secPromotion.endDate)\r\n\t\t\t\t\tif(this.isEdit) {\r\n\t\t\t\t\t\tupdateSec(this.secPromotion.id, this.secPromotion).then(res => {\r\n\t\t\t\t\t\t\tif(res && res.success) {\r\n\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\t\tmessage: '修改成功！'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tthis.dialogVisible = false\r\n\t\t\t\t\t\t\t\t// this.secPromotion = this.options.data.secPromotion\r\n\t\t\t\t\t\t\t\tthis.getList()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcreateSec(this.secPromotion).then(res => {\r\n\t\t\t\t\t\t\tif(res && res.success) {\r\n\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\t\tmessage: '创建成功！'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tthis.dialogVisible = false\r\n\t\t\t\t\t\t\t\tconsole.log(this.$options.data().secPromotion)\r\n\t\t\t\t\t\t\t\t// this.secPromotion = this.$options.data.secPromotion\r\n\t\t\t\t\t\t\t\tthis.getList()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(e => {\r\n\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tformatDate(date) {\r\n\t\t\t\t//传入2020-06-07T16:00:00.000Z\r\n\t\t\t\t//返回2020-06-07\r\n\t\t\t\tlet dateVal = new Date(date)\r\n\t\t\t\tdateVal.setMinutes(dateVal.getMinutes() - dateVal.getTimezoneOffset()) //时区补偿\r\n\t\t\t\tdateVal=dateVal.toJSON().substr(0,10).replace(/[T]/g, '')\r\n\t\t\t\treturn dateVal\r\n\t\t\t},\r\n\t\t\thandleStatusChange(row, index) {\r\n        this.$confirm('是否修改该状态', '提示',{\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n\t\t\t\t\tconst param={\r\n\t\t\t\t\t\tid: row.id,\r\n\t\t\t\t\t\tstatus: row.status\r\n\t\t\t\t\t}\r\n          updateSecStatus(param).then(res => {\r\n            if(res && res.success) {\r\n              this.$message({\r\n                type: 'success',\r\n                message: '状态修改成功！'\r\n              })\r\n            } else {\r\n\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\t\t\tmessage: res.msg\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n            this.getList()\r\n          }).catch(e => {\r\n            this.$message({\r\n              type: 'error',\r\n              message: '修改失败！' + e\r\n            })\r\n          })\r\n        })\r\n      }\r\n\t\t}\r\n\t}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n\t.mt20 {\r\n\t\tmargin: 20px 0;\r\n\t}\r\n\t.table-layout {\r\n\t\tmargin-top: 10px;\r\n\t\tborder-top: 1px solid #DCDFE6;\r\n\t\tborder-left: 1px solid #DCDFE6;\r\n\t}\r\n\t.layout {\r\n\t\tmargin-top: 10px;\r\n\t}\r\n\t.table-cell {\r\n\t\tborder-right: 1px solid #DCDFE6;\r\n\t\tborder-bottom: 1px solid #DCDFE6;\r\n\t\ttext-align: center;\r\n\t\tline-height: 40px;\r\n\t\theight: 40px;\r\n\t\tpadding: 0 10px;\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #606266;\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t}\r\n\t.table-cell-title {\r\n\t\tbackground: #F2F6FC;\r\n\t}\r\n\t.search-tit {\r\n\t\tmargin: 20px;\r\n\t}\r\n\t.search-btn {\r\n\t\tfloat:right;\r\n\t\tmargin-right: 10px;\r\n\t}\r\n\t.tit {\r\n\t\tpadding: 10px;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t.op-container {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/sec/secList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('el-card',{staticClass:\"mt20\",attrs:{\"shadow\":\"never\"}},[_c('div',{staticClass:\"search-tit \"},[_c('i',{staticClass:\"el-icon-search\"}),_vm._v(\" \"),_c('span',[_vm._v(\"筛选搜索\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"search-btn\",attrs:{\"size\":\"mini\"},on:{\"click\":_vm.resetSearch}},[_vm._v(\"重置\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"search-btn\",attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.getList}},[_vm._v(\"查找\")])],1),_vm._v(\" \"),_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.filters,\"label-width\":\"150px\"}},[_c('el-form-item',{attrs:{\"label\":\"活动标题:\",\"prop\":\"title\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入活动名称\"},model:{value:(_vm.filters.title),callback:function ($$v) {_vm.$set(_vm.filters, \"title\", $$v)},expression:\"filters.title\"}})],1)],1)],1),_vm._v(\" \"),_c('el-card',{staticClass:\"mt20\",attrs:{\"shadow\":\"never\"}},[_c('div',{staticClass:\"tit\"},[_c('i',{staticClass:\"fa fa-file-text-o\"}),_vm._v(\" \"),_c('span',[_vm._v(\"数据列表\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"float\":\"right\"},attrs:{\"size\":\"mini\"},on:{\"click\":_vm.handleAdd}},[_vm._v(\"添加\")])],1)]),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.listLoading),expression:\"listLoading\"}],staticStyle:{\"margin\":\"20px 10px\"},attrs:{\"data\":_vm.list,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"编号\",\"align\":\"center\",\"width\":\"100\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"title\",\"label\":\"活动标题\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"activeStatus\",\"label\":\"活动状态\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm._f(\"filterActiveStatus\")(scope.row)))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"startDate\",\"label\":\"开始时间\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"endDate\",\"label\":\"结束时间\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"上线/下线\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{attrs:{\"active-value\":1,\"inactive-value\":0},on:{\"change\":function($event){_vm.handleStatusChange(scope.row,scope.$index)}},model:{value:(scope.row.status),callback:function ($$v) {_vm.$set(scope.row, \"status\", $$v)},expression:\"scope.row.status\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"250\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.handleUpdate(scope.row)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){_vm.handleDelete(scope.$index, scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_vm._v(\" \"),_c('el-col',{staticClass:\"toolbar\",attrs:{\"span\":24}},[_c('el-pagination',{attrs:{\"layout\":\"total, prev, pager, next, jumper\",\"background\":\"\",\"page-size\":15,\"total\":_vm.total,\"current-page\":_vm.page},on:{\"current-change\":_vm.handleCurrentChange}})],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible,\"title\":_vm.isEdit? '编辑活动':'添加活动'},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',[_c('el-form',{ref:\"secPromotionForm\",attrs:{\"model\":_vm.secPromotion,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"活动标题\",\"prop\":\"title\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入活动标题\"},model:{value:(_vm.secPromotion.title),callback:function ($$v) {_vm.$set(_vm.secPromotion, \"title\", $$v)},expression:\"secPromotion.title\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"开始时间\",\"prop\":\"startDate\"}},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"placeholder\":\"请选择时间\"},model:{value:(_vm.secPromotion.startDate),callback:function ($$v) {_vm.$set(_vm.secPromotion, \"startDate\", $$v)},expression:\"secPromotion.startDate\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"结束时间\",\"prop\":\"endDate\"}},[_c('el-date-picker',{attrs:{\"type\":\"date\",\"placeholder\":\"请选择时间\"},model:{value:(_vm.secPromotion.endDate),callback:function ($$v) {_vm.$set(_vm.secPromotion, \"endDate\", $$v)},expression:\"secPromotion.endDate\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"上线/下线\",\"prop\":\"status\"}},[_c('el-radio-group',{model:{value:(_vm.secPromotion.status),callback:function ($$v) {_vm.$set(_vm.secPromotion, \"status\", $$v)},expression:\"secPromotion.status\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"上线\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":0}},[_vm._v(\"下线\")])],1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"op-container mt40\"},[_c('el-button',{on:{\"click\":_vm.handleReset}},[_vm._v(\"重置\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"提交\")])],1)],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-29cb33a3\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/sec/secList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-29cb33a3\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./secList.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./secList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./secList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-29cb33a3\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./secList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-29cb33a3\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/sec/secList.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}