{"version":3,"sources":["webpack:///src/components/userList/userList.vue","webpack:///./src/components/userList/userList.vue?6bde","webpack:///./src/components/userList/userList.vue","webpack:///./src/util/util.js"],"names":["formRules","name","required","message","trigger","addForm","sex","age","birth","addr","editForm","userList","data","user","users","total","page","sels","listLoading","filters","addFormVisible","addLoading","editFormVisible","editFormRules","editLoading","mounted","this","getUsers","JSON","parse","sessionStorage","getItem","console","log","methods","formatSex","row","_this","nameParam","param","Object","request","then","res","success","catch","e","handleSelsChange","handleAdd","handleCurrentChange","val","handleEdit","index","handleDel","_this2","$confirm","type","role","accessToken","id","$message","msg","batchRemove","_this3","ids","map","item","addSubmit","_this4","$refs","validate","valid","assign_default","util","resetFields","editSubmit","_this5","userList_userList","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","span","inline","model","placeholder","value","callback","$$v","$set","expression","_v","on","click","$event","directives","rawName","staticStyle","width","selection-change","label","prop","formatter","scopedSlots","_u","key","fn","scope","size","$index","disabled","length","float","layout","background","page-size","current-page","current-change","visible","title","close-on-click-modal","update:visible","ref","label-width","rules","rows","loading","min","max","nativeOn","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","d","formatDate","str","date","Date","dateStr","getFullYear","getMonth","getDay"],"mappings":"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","file":"static/js/3.f288b2f80b872b0f2de5.js","sourcesContent":["<template>\r\n  <section>\r\n    <el-col :span=\"24\" class=\"toolbar\" >\r\n      <el-form :inline=\"true\" :model=\"filters\">\r\n        <el-form-item >\r\n          <el-input v-model=\"filters.name\" placeholder=\"姓名\" ></el-input>\r\n        </el-form-item>\r\n        <el-form-item >\r\n          <el-button type=\"primary\" @click=\"getUsers(filters.name)\">查询</el-button> \r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"handleAdd\" >新增</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-col>\r\n    <el-table :data=\"users\" v-loading=\"listLoading\" @selection-change=\"handleSelsChange\" style=\"width: 100%;\">\r\n      <el-table-column type=\"selection\" width=\"55\"></el-table-column>\r\n      <el-table-column type=\"index\" width=\"60\" :index=\"(page-1)*15+1\"></el-table-column>\r\n      <el-table-column label=\"姓名\" prop=\"name\" width=\"120\"></el-table-column>\r\n      <el-table-column label=\"性别\" prop=\"sex\" :formatter=\"formatSex\" width=\"100\"></el-table-column>\r\n      <el-table-column label=\"年龄\" prop=\"age\" width=\"100\"></el-table-column>\r\n      <el-table-column label=\"生日\" prop=\"birth\" width=\"120\"></el-table-column>\r\n      <el-table-column label=\"地址\" prop=\"addr\" width=\"180\"></el-table-column>\r\n      <el-table-column label=\"操作\" width=\"150\" >\r\n        <template scope=\"scope\" >\r\n          <el-button size=\"small\" @click=\"handleEdit(scope.$index,scope.row)\">编辑</el-button>\r\n          <el-button size=\"small\" type=\"danger\" @click=\"handleDel(scope.$index, scope.row)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>  \r\n    </el-table>\r\n    <el-col :span=\"24\" class=\"toolbar\">\r\n      <el-button type=\"danger\" :disabled=\"sels.length===0\" @click=\"batchRemove\">批量删除</el-button>\r\n      <el-pagination layout=\"prev,pager,next\" background :total=\"total\" :page-size=\"15\" :current-page=\"page\" @current-change=\"handleCurrentChange\" style=\"float:right;\"></el-pagination>\r\n    </el-col>\r\n\r\n    <el-dialog :visible.sync=\"editFormVisible\"  title=\"编辑\" :close-on-click-modal=\"false\">\r\n      <el-form :model=\"editForm\" label-width=\"80px\" ref=\"editForm\" :rules=\"editFormRules\">\r\n        <el-form-item label=\"姓名\" prop=\"name\">\r\n          <el-input v-model=\"editForm.name\" ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"性别\" prop=\"sex\">\r\n          <el-radio-group v-model=\"editForm.sex\" >\r\n            <el-radio :label=\"1\">男</el-radio>\r\n            <el-radio :label=\"0\">女</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"年龄\" prop=\"age\">\r\n          <el-input-number v-model=\"editForm.age\"></el-input-number>\r\n        </el-form-item>\r\n        <el-form-item label=\"生日\" prop=\"birth\">\r\n          <el-date-picker v-model=\"editForm.birth\" placeholder=\"选择生日\"></el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item label=\"地址\" prop=\"addr\">\r\n          <el-input v-model=\"editForm.addr\" type=\"textarea\" :rows=\"2\" placeholder=\"请输入地址\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"editSubmit\" :loading=\"editLoading\">提交</el-button>\r\n          <el-button @click=\"editFormVisible=false\">取消</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-dialog>\r\n\r\n    <el-dialog :visible.sync=\"addFormVisible\" title=\"新增\" :close-on-click-modal=\"false\">\r\n      <el-form :model=\"addForm\" :rules=\"editFormRules\" ref=\"addForm\" label-width=\"80px\">\r\n        <el-form-item label=\"姓名\" prop=\"name\">\r\n          <el-input v-model=\"addForm.name\" ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"性别\" prop=\"sex\">\r\n          <el-radio-group v-model=\"addForm.sex\">\r\n            <el-radio :label=\"1\">男</el-radio>\r\n            <el-radio :label=\"0\">女</el-radio>            \r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"年龄\" prop=\"age\">\r\n          <el-input-number v-model=\"addForm.age\" :min=\"0\" :max=\"150\"></el-input-number>\r\n        </el-form-item>\r\n        <el-form-item label=\"生日\" prop=\"birth\">\r\n          <el-date-picker v-model=\"addForm.birth\" placeholder=\"选择生日\"></el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item label=\"地址\" prop=\"addr\">\r\n          <el-input v-model=\"addForm.addr\" type=\"textarea\" :rows=\"2\" placeholder=\"请输入地址\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item >\r\n          <el-button type=\"primary\" @click=\"addSubmit\" :loading=\"addLoading\">创建</el-button>\r\n          <el-button @click.native=\"addFormVisible=false\">取消</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-dialog>\r\n  </section>\r\n</template>\r\n<script type=\"text/ecmascript-6\">\r\n  import {getUserList, removeUser, batchRemove, editUser, addUser} from 'api/request'\r\n  import {formatDate} from 'util/util'\r\n\r\n  const formRules = {name: [{required: true,message: '请输入姓名',trigger: 'blur'}]}\r\n  const addForm= { name: '',  sex: -1, age: 0,  birth: '', addr: ''  }\r\n  const editForm =  { name: '',  sex: -1, age: 0,  birth: '', addr: ''  }\r\n  export default {\r\n    data() {\r\n      return {\r\n        user: {},\r\n        users: [],\r\n        total: 0,\r\n        page: 1,\r\n        sels: [],  //\r\n        listLoading: false,\r\n        filters: {\r\n          name: ''\r\n        },\r\n        addFormVisible:false,\r\n        addForm: addForm,\r\n        addLoading: false,\r\n        editFormVisible: false,\r\n        editForm: editForm,\r\n        editFormRules: formRules,\r\n        editLoading: false\r\n      }\r\n    },\r\n    mounted() {\r\n      this.getUsers()\r\n      this.user = JSON.parse(sessionStorage.getItem('user')) \r\n      console.log(this.user)\r\n    },\r\n    methods: {\r\n      formatSex(row) {\r\n        return row.sex === 1 ? '男' : row.sex === 0 ? '女' : '未知' \r\n      },\r\n      getUsers(name) {\r\n        let nameParam = name || ''\r\n        let param = {\r\n          page: this.page,\r\n          name: nameParam\r\n        }\r\n        this.listLoading = true\r\n        getUserList(param).then(res => {\r\n          if(res.success) {\r\n            this.listLoading = false            \r\n            this.total = res.total\r\n            this.users = res.users\r\n          }\r\n        }).catch((e) => {\r\n          this.listLoading = false\r\n        })\r\n      },\r\n      handleSelsChange(sels) {\r\n        this.sels = sels\r\n      },\r\n      handleAdd() {\r\n        this.addFormVisible = true\r\n        this.addForm = addForm\r\n      },\r\n      handleCurrentChange(val) {\r\n        this.page = val\r\n        this.getUsers()\r\n      },\r\n      handleEdit(index,row) {\r\n        this.editFormVisible = true\r\n        this.editForm = row\r\n      },\r\n      handleDel(index,row) {\r\n        this.$confirm('确认删除该项记录吗？','提示',{type: 'warning'})\r\n          .then(() => {\r\n            if(this.user.role !== '超级管理员') {\r\n              this.$message({\r\n                type: 'danger',\r\n                message: '权限不足'\r\n              })\r\n              return\r\n            }\r\n            this.listLoading = true\r\n            let param = {accessToken: this.user.accessToken, id: row.id}\r\n            removeUser(param).then((res) => {\r\n              this.listLoading = false\r\n              if(res.success) {\r\n                this.$message({\r\n                  message: res.msg,\r\n                  type: 'success'\r\n                })\r\n                this.getUsers()\r\n              } else {\r\n                this.$message({\r\n                  type: 'error',\r\n                  message: res.msg\r\n                })\r\n              }\r\n            })\r\n          }).catch((e) => {\r\n            this.listLoading = false\r\n            this.$message({\r\n              message: e,\r\n              type: 'error'\r\n            })\r\n          })\r\n      },\r\n      batchRemove() {\r\n        let ids = this.sels.map(item => item.id)\r\n        this.$confirm('确认删除选中记录吗？','提示',{\r\n          type: 'warning'\r\n        }).then(() => {\r\n          this.listLoading = true\r\n          let param = {accessToken: this.user.accessToken, ids: ids}\r\n          batchRemove(param).then((res) => {\r\n            this.listLoading = false\r\n            if(res.success) {\r\n              this.$message({\r\n                message: res.msg,\r\n                type: 'success'\r\n              })\r\n              this.getUsers()              \r\n            } else {\r\n              this.$message({\r\n                type: 'error',\r\n                message: res.msg\r\n              })\r\n            }\r\n          })\r\n        }).catch((e) => {\r\n          this.listLoading = false\r\n          this.$message({\r\n              message: e,\r\n              type: 'danger'\r\n          })\r\n        })\r\n      },\r\n      addSubmit() {\r\n        //先验证rules，然后弹出confirm框确认，然后组建参数发起请求，最后getUser\r\n        this.$refs.addForm.validate((valid) => {\r\n          if(valid) {\r\n            this.$confirm('确认提交吗？','提示',{\r\n              type: 'warning'\r\n            }).then(() => {\r\n              this.addLoading= true\r\n              let param = Object.assign({}, this.addForm)\r\n              param.birth = formatDate(param.birth)\r\n              addUser(param).then((data) => {\r\n                this.addLoading = false\r\n                if(!data.success) {\r\n                  this.$message({\r\n                    type: 'error',\r\n                    message: data.msg\r\n                  })\r\n                  return\r\n                }\r\n                this.$message({\r\n                  type: 'success',\r\n                  message: data.msg\r\n                })\r\n                this.$refs.addForm.resetFields()\r\n                this.addFormVisible = false\r\n                this.getUsers()\r\n              })\r\n            }).catch((e) => {\r\n              this.addLoading = false\r\n              this.$message({\r\n                type: 'danger',\r\n                message: e\r\n              })\r\n            })\r\n          }\r\n        })\r\n      },\r\n      editSubmit() {\r\n        this.$refs.editForm.validate((valid) => {\r\n          if(valid) {\r\n            this.$confirm('确认提交吗？','提示',{\r\n              type: 'warning'\r\n            }).then(() => {\r\n              this.editLoading = true\r\n              let param = Object.assign({}, this.editForm)\r\n              param.birth = formatDate(param.birth)\r\n              editUser(param).then((data) => {\r\n                this.editLoading = false\r\n                 if(!data.success) {\r\n                  this.$message({\r\n                    type: 'error',\r\n                    message: data.msg\r\n                  })\r\n                  return\r\n                }\r\n                this.$message({\r\n                  type: 'success',\r\n                  message: '提交成功'\r\n                })\r\n                this.$refs.editForm.resetFields()\r\n                this.editFormVisible = false\r\n                this.getUsers()\r\n              })\r\n            }).catch(e => {\r\n              this.editLoading = false\r\n              this.$message({\r\n                type: 'danger',\r\n                message: e\r\n              })\r\n            })\r\n          }\r\n        })\r\n      }\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n  /*.toolbar {\r\n    height: 56px;\r\n    padding: 10px 10px 0;\r\n    margin: 10px 0;\r\n    background: ;\r\n  }*/\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/userList/userList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('el-col',{staticClass:\"toolbar\",attrs:{\"span\":24}},[_c('el-form',{attrs:{\"inline\":true,\"model\":_vm.filters}},[_c('el-form-item',[_c('el-input',{attrs:{\"placeholder\":\"姓名\"},model:{value:(_vm.filters.name),callback:function ($$v) {_vm.$set(_vm.filters, \"name\", $$v)},expression:\"filters.name\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.getUsers(_vm.filters.name)}}},[_vm._v(\"查询\")])],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleAdd}},[_vm._v(\"新增\")])],1)],1)],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.listLoading),expression:\"listLoading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.users},on:{\"selection-change\":_vm.handleSelsChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"type\":\"index\",\"width\":\"60\",\"index\":(_vm.page-1)*15+1}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"姓名\",\"prop\":\"name\",\"width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"性别\",\"prop\":\"sex\",\"formatter\":_vm.formatSex,\"width\":\"100\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"年龄\",\"prop\":\"age\",\"width\":\"100\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"生日\",\"prop\":\"birth\",\"width\":\"120\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"地址\",\"prop\":\"addr\",\"width\":\"180\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.handleEdit(scope.$index,scope.row)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"danger\"},on:{\"click\":function($event){_vm.handleDel(scope.$index, scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_vm._v(\" \"),_c('el-col',{staticClass:\"toolbar\",attrs:{\"span\":24}},[_c('el-button',{attrs:{\"type\":\"danger\",\"disabled\":_vm.sels.length===0},on:{\"click\":_vm.batchRemove}},[_vm._v(\"批量删除\")]),_vm._v(\" \"),_c('el-pagination',{staticStyle:{\"float\":\"right\"},attrs:{\"layout\":\"prev,pager,next\",\"background\":\"\",\"total\":_vm.total,\"page-size\":15,\"current-page\":_vm.page},on:{\"current-change\":_vm.handleCurrentChange}})],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.editFormVisible,\"title\":\"编辑\",\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.editFormVisible=$event}}},[_c('el-form',{ref:\"editForm\",attrs:{\"model\":_vm.editForm,\"label-width\":\"80px\",\"rules\":_vm.editFormRules}},[_c('el-form-item',{attrs:{\"label\":\"姓名\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.editForm.name),callback:function ($$v) {_vm.$set(_vm.editForm, \"name\", $$v)},expression:\"editForm.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"性别\",\"prop\":\"sex\"}},[_c('el-radio-group',{model:{value:(_vm.editForm.sex),callback:function ($$v) {_vm.$set(_vm.editForm, \"sex\", $$v)},expression:\"editForm.sex\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"男\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":0}},[_vm._v(\"女\")])],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"年龄\",\"prop\":\"age\"}},[_c('el-input-number',{model:{value:(_vm.editForm.age),callback:function ($$v) {_vm.$set(_vm.editForm, \"age\", $$v)},expression:\"editForm.age\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"生日\",\"prop\":\"birth\"}},[_c('el-date-picker',{attrs:{\"placeholder\":\"选择生日\"},model:{value:(_vm.editForm.birth),callback:function ($$v) {_vm.$set(_vm.editForm, \"birth\", $$v)},expression:\"editForm.birth\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"地址\",\"prop\":\"addr\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":2,\"placeholder\":\"请输入地址\"},model:{value:(_vm.editForm.addr),callback:function ($$v) {_vm.$set(_vm.editForm, \"addr\", $$v)},expression:\"editForm.addr\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.editLoading},on:{\"click\":_vm.editSubmit}},[_vm._v(\"提交\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":function($event){_vm.editFormVisible=false}}},[_vm._v(\"取消\")])],1)],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.addFormVisible,\"title\":\"新增\",\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.addFormVisible=$event}}},[_c('el-form',{ref:\"addForm\",attrs:{\"model\":_vm.addForm,\"rules\":_vm.editFormRules,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"姓名\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.addForm.name),callback:function ($$v) {_vm.$set(_vm.addForm, \"name\", $$v)},expression:\"addForm.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"性别\",\"prop\":\"sex\"}},[_c('el-radio-group',{model:{value:(_vm.addForm.sex),callback:function ($$v) {_vm.$set(_vm.addForm, \"sex\", $$v)},expression:\"addForm.sex\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"男\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":0}},[_vm._v(\"女\")])],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"年龄\",\"prop\":\"age\"}},[_c('el-input-number',{attrs:{\"min\":0,\"max\":150},model:{value:(_vm.addForm.age),callback:function ($$v) {_vm.$set(_vm.addForm, \"age\", $$v)},expression:\"addForm.age\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"生日\",\"prop\":\"birth\"}},[_c('el-date-picker',{attrs:{\"placeholder\":\"选择生日\"},model:{value:(_vm.addForm.birth),callback:function ($$v) {_vm.$set(_vm.addForm, \"birth\", $$v)},expression:\"addForm.birth\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"地址\",\"prop\":\"addr\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":2,\"placeholder\":\"请输入地址\"},model:{value:(_vm.addForm.addr),callback:function ($$v) {_vm.$set(_vm.addForm, \"addr\", $$v)},expression:\"addForm.addr\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.addLoading},on:{\"click\":_vm.addSubmit}},[_vm._v(\"创建\")]),_vm._v(\" \"),_c('el-button',{nativeOn:{\"click\":function($event){_vm.addFormVisible=false}}},[_vm._v(\"取消\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-875445c6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/userList/userList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-875445c6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./userList.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./userList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./userList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-875445c6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./userList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-875445c6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/userList/userList.vue\n// module id = null\n// module chunks = ","export const formatDate = (str) => {\r\n  let date = new Date(str)\r\n  let dateStr = date.getFullYear() + '-' + date.getMonth() + '-' + date.getDay()\r\n  console.log(dateStr)\r\n  return dateStr\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/util.js"],"sourceRoot":""}