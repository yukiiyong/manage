webpackJsonp([7],{eu0k:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("Dd8w"),a=n.n(o),l=n("l/JR"),s={0:"未使用",1:"已过期",2:"已下架",3:"已使用"},i={0:"全场赠券",1:"会员赠券",2:"注册赠券"},r={0:"全场通用",1:"指定商品",2:"指定分类"},u={data:function(){return{coupons:[{id:"",couponSn:"",couponName:"",couponType:"",goodsType:"",min:0,discount:0,limit:"",total:0,status:""}],filters:{name:"",type:"",status:""},couponDetail:{},total:0,page:1,listLoading:!1,couponDialogVisible:!1,statusMap:s,typeMap:i,goodsTypeMap:r}},filters:{filterCouponType:function(t){return i[t]},filterGoodsType:function(t){return r[t]},filterCouponStatus:function(t){return s[t]},createTime:function(t){return new Date(t)}},mounted:function(){this.getCouponList()},methods:{getCouponList:function(){var t=this;this.listLoading=!0;var e=a()({},this.filters,{page:this.page});Object(l.g)(e).then(function(e){e.success&&(t.listLoading=!1,t.coupons=e.list,t.total=e.total)}).catch(function(e){t.listLoading=!1,t.$message({type:"danger",message:e})})},resetSearch:function(){this.$refs.couponForm.resetFields()},handleCurrentChange:function(t){this.page=t,this.getCouponList()},showCouponDetail:function(t){t&&this.$router.push({path:"/promotion/couponDetail",query:{id:t.id}})},handleCouponDelete:function(t,e){var n=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then(function(){n.coupons.splice(t,1)}),this.getCouponList()},handleConponUpdate:function(t){},addCoupon:function(t){this.$router.push({path:"/promotion/addCoupon"})}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("el-card",{staticClass:"mt20",attrs:{shadow:"never"}},[n("div",{staticClass:"search-tit "},[n("i",{staticClass:"el-icon-search"}),t._v(" "),n("span",[t._v("筛选搜索")]),t._v(" "),n("el-button",{staticClass:"search-btn",attrs:{size:"mini"},on:{click:t.resetSearch}},[t._v("重置")]),t._v(" "),n("el-button",{staticClass:"search-btn",attrs:{type:"primary",size:"mini"},on:{click:t.getCouponList}},[t._v("查找")])],1),t._v(" "),n("el-form",{ref:"couponForm",attrs:{model:t.filters,"label-width":"150px"}},[n("el-form-item",{attrs:{label:"优惠券名称:",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入优惠券名称"},model:{value:t.filters.name,callback:function(e){t.$set(t.filters,"name",e)},expression:"filters.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"优惠券类型:",prop:"type"}},[n("el-select",{attrs:{placeholder:"请选择优惠券类型"},model:{value:t.filters.type,callback:function(e){t.$set(t.filters,"type",e)},expression:"filters.type"}},t._l(t.typeMap,function(t,e){return n("el-option",{key:t,attrs:{label:t,value:e}})}))],1),t._v(" "),n("el-form-item",{attrs:{label:"优惠券状态:",prop:"status"}},[n("el-select",{attrs:{placeholder:"请选择优惠券状态"},model:{value:t.filters.status,callback:function(e){t.$set(t.filters,"status",e)},expression:"filters.status"}},t._l(t.statusMap,function(t,e){return n("el-option",{key:t,attrs:{label:t,value:e}})}))],1)],1)],1),t._v(" "),n("el-card",{staticClass:"mt20",attrs:{shadow:"never"}},[n("div",{staticClass:"tit"},[n("i",{staticClass:"fa fa-file-text-o"}),t._v(" "),n("span",[t._v("数据列表")]),t._v(" "),n("el-button",{staticStyle:{float:"right"},attrs:{size:"mini"},on:{click:t.addCoupon}},[t._v("添加")])],1)]),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{margin:"20px 10px"},attrs:{data:t.coupons,border:""}},[n("el-table-column",{attrs:{prop:"couponSn",label:"编号",align:"center",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"couponName",label:"优惠券名称",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"couponType",label:"优惠券类型",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t._f("filterCouponType")(e.row.couponType)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"goodsType",label:"使用范围",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t._f("filterGoodsType")(e.row.goodsType)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"min",label:"使用门槛",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v("满"+t._s(e.row.min)+"元可用")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"discount",label:"满减金额",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"limit",label:"每人限领",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"total",label:"优惠券数量",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t._f("filterCouponStatus")(e.row.status)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",width:"250",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){t.showCouponDetail(e.row)}}},[t._v("详情")]),t._v(" "),n("el-button",{attrs:{size:"mini"},on:{click:function(n){t.handleConponUpdate(e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){t.handleCouponDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("el-col",{staticClass:"toolbar",attrs:{span:24}},[n("el-pagination",{attrs:{layout:"total, prev, pager, next, jumper",background:"","page-size":15,total:t.total,"current-page":t.page},on:{"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var p=n("VU/8")(u,c,!1,function(t){n("rSJ0")},"data-v-f3ee29da",null);e.default=p.exports},rSJ0:function(t,e){}});
//# sourceMappingURL=7.95bdb3cf27387433f568.js.map